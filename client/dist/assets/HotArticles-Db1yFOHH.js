import{_ as S,o as $,a as b,c as F,b as d,d as e,w as o,g as n,A as M,e as x,t as i,D as P,k as w,F as T,G as U,s as j,f as G,h as I,E as L,r,i as c,B as R}from"./index-CFbs32FA.js";const q={class:"hot-articles"},J={class:"sort-tabs"},K={__name:"HotArticles",setup(O){const k=c([]),_=c(!1),p=c("score"),f=c(1),C=c(10),y=c(0),v=async()=>{_.value=!0;try{const l=`/admin/articles/hot/${p.value}`,t=await I.get(l,{params:{page:f.value-1,size:C.value}});k.value=t.content,y.value=t.totalElements}catch{L.error("加载热门文章失败")}finally{_.value=!1}},h=l=>l.favorites?l.favorites.length:0,V=l=>{const t=l.likeCount||0,u=l.viewCount||0,m=h(l);return t*2+u+m*3},z=l=>l===1?"rank-first":l===2?"rank-second":l===3?"rank-third":"rank-normal",A=l=>l?new Date(l).toLocaleString("zh-CN"):"";return $(()=>{v()}),(l,t)=>{const u=r("el-radio-button"),m=r("el-radio-group"),s=r("el-table-column"),D=r("el-link"),g=r("el-icon"),B=r("el-tag"),N=r("el-table"),E=r("el-pagination"),H=R("loading");return b(),F("div",q,[t[6]||(t[6]=d("h2",null,"热门文章排行",-1)),d("div",J,[e(m,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),onChange:v},{default:o(()=>[e(u,{label:"score"},{default:o(()=>[...t[2]||(t[2]=[n("综合排序",-1)])]),_:1}),e(u,{label:"likes"},{default:o(()=>[...t[3]||(t[3]=[n("按点赞数",-1)])]),_:1}),e(u,{label:"views"},{default:o(()=>[...t[4]||(t[4]=[n("按阅读数",-1)])]),_:1}),e(u,{label:"favorites"},{default:o(()=>[...t[5]||(t[5]=[n("按收藏数",-1)])]),_:1})]),_:1},8,["modelValue"])]),M((b(),x(N,{data:k.value,style:{width:"100%","margin-top":"20px"}},{default:o(()=>[e(s,{type:"index",label:"排名",width:"80"},{default:o(({$index:a})=>[d("span",{class:P(z(a+1))},i(a+1),3)]),_:1}),e(s,{prop:"title",label:"标题","min-width":"250","show-overflow-tooltip":""},{default:o(({row:a})=>[e(D,{onClick:Q=>l.$router.push(`/article/${a.id}`),type:"primary"},{default:o(()=>[n(i(a.title),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{prop:"author.username",label:"作者",width:"120"}),e(s,{label:"阅读",width:"100",sortable:""},{default:o(({row:a})=>[d("span",null,[e(g,null,{default:o(()=>[e(w(T))]),_:1}),n(" "+i(a.viewCount||0),1)])]),_:1}),e(s,{label:"点赞",width:"100",sortable:""},{default:o(({row:a})=>[d("span",null,[e(g,null,{default:o(()=>[e(w(U))]),_:1}),n(" "+i(a.likeCount||0),1)])]),_:1}),e(s,{label:"收藏",width:"100"},{default:o(({row:a})=>[d("span",null,[e(g,null,{default:o(()=>[e(w(j))]),_:1}),n(" "+i(h(a)),1)])]),_:1}),p.value==="score"?(b(),x(s,{key:0,label:"综合分数",width:"120"},{default:o(({row:a})=>[e(B,{type:"success"},{default:o(()=>[n(i(V(a)),1)]),_:2},1024)]),_:1})):G("",!0),e(s,{prop:"category.name",label:"分类",width:"120"}),e(s,{prop:"createdAt",label:"发布时间",width:"180"},{default:o(({row:a})=>[n(i(A(a.createdAt)),1)]),_:1})]),_:1},8,["data"])),[[H,_.value]]),e(E,{"current-page":f.value,"onUpdate:currentPage":t[1]||(t[1]=a=>f.value=a),"page-size":C.value,total:y.value,layout:"total, prev, pager, next",onCurrentChange:v,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total"])])}}},X=S(K,[["__scopeId","data-v-4b65edfc"]]);export{X as default};
